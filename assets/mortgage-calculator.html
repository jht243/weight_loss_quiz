<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Mortgage Calculator Widget</title>
    <style>
      :root {
        color-scheme: dark;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        padding: 24px;
        background: radial-gradient(circle at top, #1f2937, #0b101a);
        color: #f9fafb;
        display: flex;
        justify-content: center;
      }

      .app {
        width: min(620px, 100%);
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 20px 60px rgba(15, 23, 42, 0.5);
        backdrop-filter: blur(12px);
      }

      h1 {
        font-size: 22px;
        font-weight: 600;
        margin: 0 0 6px;
      }

      p.subtitle {
        margin: 0 0 24px;
        color: rgba(226, 232, 240, 0.72);
        font-size: 14px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
      }

      label {
        display: flex;
        flex-direction: column;
        gap: 6px;
        font-size: 13px;
        color: rgba(226, 232, 240, 0.86);
      }

      input[type="number"] {
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.6);
        color: #f9fafb;
        font-size: 16px;
        padding: 10px 12px;
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }

      input[type="number"]:focus {
        outline: none;
        border-color: #38bdf8;
        box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.4);
      }

      .actions {
        margin: 24px 0 12px;
        display: flex;
        gap: 12px;
      }

      button {
        flex: 1;
        border: none;
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        background: linear-gradient(135deg, #38bdf8, #6366f1);
        color: #0b1120;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 30px rgba(99, 102, 241, 0.35);
      }

      button.secondary {
        flex: none;
        min-width: 120px;
        background: rgba(148, 163, 184, 0.15);
        color: rgba(226, 232, 240, 0.85);
        box-shadow: none;
      }

      .results {
        border-top: 1px solid rgba(148, 163, 184, 0.2);
        padding-top: 20px;
        display: grid;
        gap: 14px;
      }

      .result-card {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        border-radius: 12px;
        background: rgba(15, 23, 42, 0.65);
        border: 1px solid rgba(148, 163, 184, 0.15);
      }

      .result-card span.label {
        font-size: 13px;
        color: rgba(226, 232, 240, 0.7);
        text-transform: uppercase;
        letter-spacing: 0.04em;
      }

      .result-card span.value {
        font-size: 22px;
        font-weight: 600;
        color: #f9fafb;
      }

      .result-card span.value.secondary {
        font-size: 18px;
        color: #38bdf8;
      }

      .summary {
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.15);
        background: rgba(15, 23, 42, 0.55);
        padding: 16px;
        font-size: 14px;
        color: rgba(226, 232, 240, 0.82);
        line-height: 1.6;
      }

      .summary strong {
        color: #f9fafb;
      }

      @media (max-width: 480px) {
        body {
          padding: 16px;
        }

        .app {
          padding: 20px;
        }

        button {
          font-size: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <h1>Mortgage payment estimator</h1>
      <p class="subtitle">
        Enter a few details and we will estimate your monthly payment, lifetime interest, and total cost.
      </p>

      <div class="grid">
        <label>
          Purchase price ($)
          <input type="number" id="purchasePrice" min="0" step="1000" value="450000" />
        </label>
        <label>
          Down payment ($)
          <input type="number" id="downPayment" min="0" step="1000" value="90000" />
        </label>
        <label>
          Interest rate (% APR)
          <input type="number" id="interestRate" min="0" step="0.01" value="6.75" />
        </label>
        <label>
          Term length (years)
          <input type="number" id="termYears" min="1" step="1" value="30" />
        </label>
      </div>

      <div class="actions">
        <button id="calculateBtn">Calculate payment</button>
        <button class="secondary" id="resetBtn">Reset</button>
      </div>

      <div class="results" id="results">
        <div class="result-card">
          <span class="label">Estimated monthly payment</span>
          <span class="value" id="monthlyPayment">$2,323</span>
        </div>
        <div class="result-card">
          <span class="label">Total interest paid</span>
          <span class="value secondary" id="totalInterest">$476,280</span>
        </div>
        <div class="result-card">
          <span class="label">Lifetime cost</span>
          <span class="value" id="totalCost">$836,280</span>
        </div>
      </div>

      <div class="summary" id="summaryText">
        For a $360,000 loan at 6.75% APR over 30 years, your monthly payment is approximately <strong>$2,323</strong>.
        You would pay about <strong>$476,280</strong> in interest, for a total cost of <strong>$836,280</strong>.
      </div>
    </div>

    <script>
      const formatCurrency = (value) =>
        value.toLocaleString(undefined, { style: "currency", currency: "USD", maximumFractionDigits: 0 });

      const calculate = () => {
        const purchasePrice = Number(document.getElementById("purchasePrice").value) || 0;
        const downPayment = Number(document.getElementById("downPayment").value) || 0;
        const interestRate = Number(document.getElementById("interestRate").value) || 0;
        const termYears = Number(document.getElementById("termYears").value) || 0;

        const loanAmount = Math.max(purchasePrice - downPayment, 0);
        const monthlyRate = interestRate > 0 ? interestRate / 100 / 12 : 0;
        const numberOfPayments = termYears * 12;

        let monthlyPayment = 0;
        if (monthlyRate === 0) {
          monthlyPayment = numberOfPayments > 0 ? loanAmount / numberOfPayments : 0;
        } else {
          const factor = Math.pow(1 + monthlyRate, numberOfPayments);
          monthlyPayment = (loanAmount * monthlyRate * factor) / (factor - 1 || 1);
        }

        const totalPaid = monthlyPayment * numberOfPayments;
        const totalInterest = Math.max(totalPaid - loanAmount, 0);

        document.getElementById("monthlyPayment").textContent = formatCurrency(monthlyPayment || 0);
        document.getElementById("totalInterest").textContent = formatCurrency(totalInterest || 0);
        document.getElementById("totalCost").textContent = formatCurrency(totalPaid || 0);

        const summary = `For a ${formatCurrency(loanAmount)} loan at ${interestRate}% APR over ${termYears} years, your monthly payment is approximately ${formatCurrency(monthlyPayment || 0)}. You would pay about ${formatCurrency(totalInterest || 0)} in interest, for a total cost of ${formatCurrency(totalPaid || 0)}.`;
        document.getElementById("summaryText").innerHTML = summary.replace(/\$(\d+)/g, '<strong>$$1</strong>');
      };

      const resetForm = () => {
        document.getElementById("purchasePrice").value = 450000;
        document.getElementById("downPayment").value = 90000;
        document.getElementById("interestRate").value = 6.75;
        document.getElementById("termYears").value = 30;
        calculate();
      };

      document.getElementById("calculateBtn").addEventListener("click", calculate);
      document.getElementById("resetBtn").addEventListener("click", resetForm);

      const inputs = ["purchasePrice", "downPayment", "interestRate", "termYears"];
      inputs.forEach((id) => {
        const input = document.getElementById(id);
        input.addEventListener("change", calculate);
        input.addEventListener("keyup", (event) => {
          if (event.key === "Enter") {
            calculate();
          }
        });
      });

      calculate();
    </script>
  </body>
</html>
